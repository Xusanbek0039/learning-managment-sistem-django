{% extends 'accounts/admin/base_admin.html' %}

{% block title %}Kasblar - Admin Panel | IT Creative{% endblock %}

{% block extra_css %}
<style>
:root{
    --card-bg: rgba(255,255,255,.75);
    --card-border: rgba(0,0,0,.08);
    --text-main: #111;
    --soft-bg: rgba(0,0,0,.05);
}
[data-bs-theme="dark"]{
    --card-bg: rgba(18,18,18,.8);
    --card-border: rgba(255,255,255,.08);
    --text-main: #f1f1f1;
    --soft-bg: rgba(255,255,255,.06);
}

/* ===== TOP BAR ===== */
.top-bar{
    display:flex;
    justify-content:space-between;
    align-items:center;
    flex-wrap:wrap;
    gap:12px;
    margin-bottom:20px;
}

/* ===== CARD ===== */
.ios-card{
    background:var(--card-bg);
    backdrop-filter:blur(14px);
    border:1px solid var(--card-border);
    border-radius:22px;
    box-shadow:0 12px 35px rgba(0,0,0,.15);
}

/* ===== TABLE ===== */
.table{
    color:var(--text-main);
}
.table thead th{
    border-bottom:1px solid var(--card-border);
    color:var(--text-main);
    font-weight:600;
}
.table tbody td{
    vertical-align:middle;
    border-color:var(--card-border);
}

/* ===== IMAGE ===== */
.profession-img{
    width:46px;
    height:46px;
    object-fit:cover;
    border-radius:10px;
}

/* ===== ACTION BTNS ===== */
.action-btns{
    display:flex;
    gap:6px;
    flex-wrap:wrap;
}

/* ===== MOBILE ===== */
@media(max-width:768px){
    .table thead{display:none;}
    .table tbody tr{
        display:block;
        border:1px solid var(--card-border);
        border-radius:14px;
        padding:12px;
        margin-bottom:12px;
        background:var(--soft-bg);
    }
    .table tbody td{
        display:flex;
        justify-content:space-between;
        padding:6px 0;
        border:none;
    }
    .table tbody td::before{
        content:attr(data-label);
        font-weight:600;
        opacity:.7;
    }
}
</style>
{% endblock %}

{% block admin_content %}

<div class="top-bar">
    <h3 class="m-0">
        <i class="bi bi-briefcase me-2"></i>Kasblar
    </h3>

    <a href="{% url 'admin_profession_add' %}" class="btn btn-primary rounded-pill px-4">
        <i class="bi bi-plus-lg me-2"></i>Kasb qo‘shish
    </a>
</div>

<div class="ios-card">

<div class="p-4 border-bottom" style="border-color:var(--card-border)!important;">
    <i class="bi bi-list me-2"></i>Barcha kasblar ({{ professions.count }})
</div>

<div class="p-3">

{% if professions %}

<div class="table-responsive">
<table class="table align-middle">

<thead>
<tr>
    <th>#</th>
    <th>Rasm</th>
    <th>Kasb</th>
    <th>Tavsif</th>
    <th>Sana</th>
    <th>Amallar</th>
</tr>
</thead>

<tbody>
{% for profession in professions %}
<tr>

<td data-label="#"> {{ forloop.counter }} </td>

<td data-label="Rasm">
    <img src="{{ profession.photo.url }}" class="profession-img" alt="">
</td>

<td data-label="Kasb">
    <strong>{{ profession.name }}</strong>
</td>

<td data-label="Tavsif">
    {{ profession.description|truncatewords:8 }}
</td>

<td data-label="Sana">
    {{ profession.created_at|date:"d.m.Y" }}
</td>

<td data-label="Amallar">
    <div class="action-btns">

        <a href="{% url 'admin_profession_edit' profession.pk %}"
           class="btn btn-sm btn-outline-primary" title="Tahrirlash">
            <i class="bi bi-pencil"></i>
        </a>

        <a href="{% url 'admin_profession_delete' profession.pk %}"
           class="btn btn-sm btn-outline-danger" title="O‘chirish">
            <i class="bi bi-trash"></i>
        </a>

        <a href="{% url 'profession_detail' profession.pk %}"
           class="btn btn-sm btn-outline-info" title="Batafsil">
            <i class="bi bi-eye"></i>
        </a>

        <a href="{% url 'manage_lessons' profession.pk %}"
           class="btn btn-sm btn-outline-warning" title="Mavzular">
            <i class="bi bi-journal-text"></i>
        </a>

    </div>
</td>

</tr>
{% endfor %}
</tbody>

</table>
</div>

{% else %}

<div class="text-center py-5">
    <i class="bi bi-inbox fs-1 text-muted"></i>
    <h5 class="mt-3">Hozircha kasblar mavjud emas</h5>
    <p class="text-muted">Yangi kasb qo‘shish uchun yuqoridagi tugmani bosing</p>
</div>

{% endif %}

</div>
</div>

{% endblock %}

{% extends 'accounts/base.html' %}

{% block title %}Bosh sahifa - LMS O'quv Markazi{% endblock %}

{% block content %}
<div class="container py-5">
    <!-- Hero Section -->
    <div class="card mb-5 border-0" style="background: linear-gradient(135deg, #0d6efd 0%, #6610f2 100%); overflow: hidden;">
        <div class="card-body p-5 text-white">
            <div class="row align-items-center">
                <div class="col-lg-7">
                    <h1 class="display-5 fw-bold mb-3">
                        <i class="bi bi-code-slash me-3"></i>Dasturlashni o'rganing!
                    </h1>
                    <p class="lead mb-4 opacity-75">
                        Zamonaviy kasblarni professional ustozlardan o'rganing. 
                        Video darsliklar, amaliy topshiriqlar va testlar orqali bilimingizni mustahkamlang.
                    </p>
                    <div class="d-flex flex-wrap gap-3">
                        <a href="{% url 'professions' %}" class="btn btn-light btn-lg">
                            <i class="bi bi-play-circle me-2"></i>Kurslarni ko'rish
                        </a>
                        <a href="{% url 'leaderboard' %}" class="btn btn-outline-light btn-lg">
                            <i class="bi bi-trophy me-2"></i>Reyting
                        </a>
                    </div>
                </div>
                <div class="col-lg-5 text-center d-none d-lg-block">
                    <i class="bi bi-laptop" style="font-size: 12rem; opacity: 0.3;"></i>
                </div>
            </div>
        </div>
    </div>

    <!-- Stats -->
    <div class="row g-4 mb-5">
        <div class="col-md-4">
            <div class="card text-center p-4 h-100">
                <div class="mb-3">
                    <i class="bi bi-people-fill text-primary" style="font-size: 3rem;"></i>
                </div>
                <h2 class="fw-bold" style="color: var(--text);">{{ total_students }}+</h2>
                <p class="text-muted mb-0">O'quvchilar</p>
            </div>
        </div>
        <div class="col-md-4">
            <div class="card text-center p-4 h-100">
                <div class="mb-3">
                    <i class="bi bi-book-fill text-success" style="font-size: 3rem;"></i>
                </div>
                <h2 class="fw-bold" style="color: var(--text);">{{ total_courses }}</h2>
                <p class="text-muted mb-0">Kurslar</p>
            </div>
        </div>
        <div class="col-md-4">
            <div class="card text-center p-4 h-100">
                <div class="mb-3">
                    <i class="bi bi-play-btn-fill text-warning" style="font-size: 3rem;"></i>
                </div>
                <h2 class="fw-bold" style="color: var(--text);">{{ total_lessons }}+</h2>
                <p class="text-muted mb-0">Darsliklar</p>
            </div>
        </div>
    </div>
    {% if user.is_admin %}
    <div class="row mb-5">
        <div class="col-12 text-center">
            <a href="{% url 'export_system_pdf' %}" class="btn btn-primary btn-lg">
                <i class="bi bi-file-earmark-pdf-fill me-2"></i> Tizim statistikasini yuklab olish (PDF)
            </a>
        </div>
    </div>
    {% endif %}

    <!-- My Courses (for students) -->
    {% if my_enrollments %}
    <div class="mb-5">
        <div class="d-flex justify-content-between align-items-center mb-4">
            <h3 style="color: var(--text);">
                <i class="bi bi-bookmark-star me-2 text-warning"></i>Mening kurslarim
            </h3>
            <a href="{% url 'profile' %}" class="btn btn-outline-primary btn-sm">Barchasi</a>
        </div>
        <div class="row g-4">
            {% for enrollment in my_enrollments %}
            <div class="col-md-6 col-lg-3">
                <a href="{% url 'profession_detail' enrollment.profession.pk %}" class="text-decoration-none">
                    <div class="card h-100">
                        <img src="{{ enrollment.profession.photo.url }}" class="card-img-top" alt="{{ enrollment.profession.name }}" style="height: 140px; object-fit: cover;">
                        <div class="card-body p-3">
                            <h6 class="mb-1" style="color: var(--text);">{{ enrollment.profession.name }}</h6>
                            <small class="text-muted">Davom ettirish →</small>
                        </div>
                    </div>
                </a>
            </div>
            {% endfor %}
        </div>
    </div>
    {% endif %}

    <!-- All Courses -->
    <div class="mb-5">
        <div class="d-flex justify-content-between align-items-center mb-4">
            <h3 style="color: var(--text);">
                <i class="bi bi-collection me-2 text-primary"></i>Barcha kurslar
            </h3>
            <a href="{% url 'professions' %}" class="btn btn-primary btn-sm">
                Barchasini ko'rish <i class="bi bi-arrow-right ms-1"></i>
            </a>
        </div>
        
        {% if professions %}
        <div class="row g-4">
            {% for profession in professions %}
            <div class="col-md-6 col-lg-4">
                <div class="card h-100">
                    <img src="{{ profession.photo.url }}" class="card-img-top" alt="{{ profession.name }}" style="height: 180px; object-fit: cover;">
                    <div class="card-body">
                        <h5 class="card-title" style="color: var(--text);">{{ profession.name }}</h5>
                        <p class="card-text text-muted small">{{ profession.description|truncatewords:12 }}</p>
                        <div class="d-flex justify-content-between align-items-center">
                            <span class="badge bg-primary bg-opacity-10 text-primary">
                                <i class="bi bi-people me-1"></i>{{ profession.student_count }}
                            </span>
                            <a href="{% url 'profession_detail' profession.pk %}" class="btn btn-primary btn-sm">
                                Batafsil
                            </a>
                        </div>
                    </div>
                </div>
            </div>
            {% endfor %}
        </div>
        {% else %}
        <div class="card text-center py-5">
            <i class="bi bi-inbox text-muted" style="font-size: 4rem;"></i>
            <p class="text-muted mt-3">Hozircha kurslar mavjud emas</p>
        </div>
        {% endif %}
    </div>

    <!-- Features Section -->
    <div class="card border-0 mb-5" style="background: var(--card);">
        <div class="card-body p-5">
            <h3 class="text-center mb-5" style="color: var(--text);">
                <i class="bi bi-stars me-2 text-warning"></i>Nima uchun bizni tanlashadi?
            </h3>
            <div class="row g-4">
                <div class="col-md-4">
                    <div class="text-center">
                        <div class="bg-primary bg-opacity-10 rounded-circle d-inline-flex align-items-center justify-content-center mb-3" style="width: 80px; height: 80px;">
                            <i class="bi bi-play-circle text-primary" style="font-size: 2rem;"></i>
                        </div>
                        <h5 style="color: var(--text);">Video darsliklar</h5>
                        <p class="text-muted small">Sifatli video darsliklar orqali istalgan vaqtda o'rganing</p>
                    </div>
                </div>
                <div class="col-md-4">
                    <div class="text-center">
                        <div class="bg-success bg-opacity-10 rounded-circle d-inline-flex align-items-center justify-content-center mb-3" style="width: 80px; height: 80px;">
                            <i class="bi bi-patch-check text-success" style="font-size: 2rem;"></i>
                        </div>
                        <h5 style="color: var(--text);">Sertifikat</h5>
                        <p class="text-muted small">Kursni tugatganingizda rasmiy sertifikat oling</p>
                    </div>
                </div>
                <div class="col-md-4">
                    <div class="text-center">
                        <div class="bg-warning bg-opacity-10 rounded-circle d-inline-flex align-items-center justify-content-center mb-3" style="width: 80px; height: 80px;">
                            <i class="bi bi-coin text-warning" style="font-size: 2rem;"></i>
                        </div>
                        <h5 style="color: var(--text);">Coin tizimi</h5>
                        <p class="text-muted small">Darslarni ko'rib, testlarni yechib coin yig'ing</p>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- CTA -->
    <div class="card text-center border-0" style="background: linear-gradient(135deg, #10b981 0%, #059669 100%);">
        <div class="card-body py-5 text-white">
            <h3 class="mb-3">Hoziroq boshlang!</h3>
            <p class="mb-4 opacity-75">Kelajagingizga sarmoya qo'ying. Professional dasturchi bo'ling!</p>
            <a href="{% url 'professions' %}" class="btn btn-light btn-lg">
                <i class="bi bi-rocket-takeoff me-2"></i>Kurslarni ko'rish
            </a>
        </div>
    </div>
</div>

<!-- Footer -->
<footer class="py-4 mt-5" style="background: var(--card); border-top: 1px solid var(--border);">
    <div class="container">
        <div class="row align-items-center">
            <div class="col-md-6 text-center text-md-start">
                <span style="color: var(--text-muted);">© 2024 LMS O'quv Markazi. Barcha huquqlar himoyalangan.</span>
            </div>
            <div class="col-md-6 text-center text-md-end mt-3 mt-md-0">
                <a href="#" class="text-muted me-3"><i class="bi bi-telegram fs-5"></i></a>
                <a href="#" class="text-muted me-3"><i class="bi bi-instagram fs-5"></i></a>
                <a href="#" class="text-muted"><i class="bi bi-youtube fs-5"></i></a>
            </div>
        </div>
    </div>
</footer>
{% endblock %}
